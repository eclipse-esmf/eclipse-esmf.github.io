<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Using Java Static Meta Classes :: Eclipse Semantic Modeling Framework (ESMF)</title>
    <link rel="canonical" href="https://eclipse-esmf.github.io/esmf-developer-guide/static-metaclasses/index.html">
    <meta name="generator" content="Antora 3.0.0">
    <link rel="stylesheet" href="../../_/css/site.css">
    <script>var uiRootPath = '../../_'</script>
<link rel="apple-touch-icon" sizes="180x180" href="../../_/img/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../_/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../../_/img/favicon-16x16.png">
<link rel="icon" type="image/x-icon" href="../../_/img/favicon.ico">
<link rel="manifest" href="../../_/img/site.webmanifest">
<link rel="mask-icon" href="../../_/img/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://eclipse-esmf.github.io">
        <div class="logo-headline-wrapper">
          <svg xmlns="http://www.w3.org/2000/svg" width="1024" height="1024" viewBox="0 0 1024 1024">
            <defs>
              <style>
                .cls-1 {
                  fill: #fff;
                }
              </style>
            </defs>
            <g id="Ebene_2" data-name="Ebene 2">
              <g>
                <g>
                  <path class="cls-1" d="M58,742.5h225a326.08,326.08,0,0,1-94.11-184.77H4A505,505,0,0,0,58,742.5Z"/>
                  <path class="cls-1" d="M1024,557.73H839.18A326.08,326.08,0,0,1,745.07,742.5H970A505,505,0,0,0,1024,557.73Z"/>
                  <path class="cls-1" d="M121.73,838a513.64,513.64,0,0,0,784.54,0Z"/>
                  <path class="cls-1" d="M188.82,462.27C212.1,304.36,349,182.73,514,182.73S815.9,304.36,839.18,462.27H1024C999.83,203,780.74,0,514,0S28.17,203,4,462.27Z"/>
                </g>
                <ellipse class="cls-1" cx="514" cy="510" rx="232.84" ry="231.82"/>
              </g>
            </g>
          </svg>
          <span class="docu-title">
            Eclipse Semantic Modeling Framework (ESMF)
          </span>
        </div>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item">
          <input id="search-input" type="text" placeholder="Search docs">
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="esmf-developer-guide" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">ESMF SDK Developer Guide</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tooling-guide/samm-cli.html">SAMM CLI</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tooling-guide/java-aspect-tooling.html">Java APIs for Aspect Models</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tooling-guide/maven-plugin.html">Maven Plugin</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tooling-guide/bamm-migration.html">Migration from BAMM</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="index.html">Using Java Static Meta Classes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="basic-usage.html">Basic Usage</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="advanced-usage.html">Advanced Usage</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">ESMF SDK Developer Guide</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../ame-guide/introduction.html">Aspect Model Editor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../ame-guide/introduction.html">master</a>
        </li>
        <li class="version">
          <a href="../../ame-guide/5.1.1/introduction.html">5.1.1</a>
        </li>
        <li class="version">
          <a href="../../ame-guide/5.1.0/introduction.html">5.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../esmf-documentation/index.html">ESMF Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../esmf-documentation/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">ESMF SDK Developer Guide</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
        <li class="version">
          <a href="../2.5.1/index.html">2.5.1</a>
        </li>
        <li class="version">
          <a href="../2.5.0/index.html">2.5.0</a>
        </li>
        <li class="version">
          <a href="../2.4.2/index.html">2.4.2</a>
        </li>
        <li class="version">
          <a href="../2.4.1/index.html">2.4.1</a>
        </li>
        <li class="version">
          <a href="../2.4.0/index.html">2.4.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../js-sdk-guide/index.html">JavaScript SDK</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../js-sdk-guide/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../js-sdk-guide/2.6.2/index.html">2.6.2</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../js-sdk-aml-guide/index.html">JavaScript SDK Aspect Model loader</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../js-sdk-aml-guide/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../js-sdk-aml-guide/2.3.0/index.html">2.3.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../python-sdk-guide/index.html">Python SDK Guide</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../python-sdk-guide/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../python-sdk-guide/2.1.0/index.html">2.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../samm-specification/snapshot/index.html">Semantic Aspect Meta Model</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../samm-specification/snapshot/index.html">snapshot</a>
        </li>
        <li class="version">
          <a href="../../samm-specification/2.1.0/index.html">2.1.0</a>
        </li>
        <li class="version">
          <a href="../../samm-specification/2.0.0/index.html">2.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../esmf-documentation/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">ESMF SDK Developer Guide</a></li>
    <li><a href="index.html">Using Java Static Meta Classes</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">master</button>
  <div class="version-menu">
    <a class="version is-current" href="index.html">master</a>
    <a class="version is-missing" href="../2.5.1/index.html">2.5.1</a>
    <a class="version is-missing" href="../2.5.0/index.html">2.5.0</a>
    <a class="version is-missing" href="../2.4.2/index.html">2.4.2</a>
    <a class="version is-missing" href="../2.4.1/index.html">2.4.1</a>
    <a class="version is-missing" href="../2.4.0/index.html">2.4.0</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/eclipse-esmf/esmf-sdk/edit/main/documentation/developer-guide/modules/static-metaclasses/pages/index.adoc">Contribute to this page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Using Java Static Meta Classes</h1>
<div class="sect1">
<h2 id="motivation"><a class="anchor" href="#motivation"></a>Motivation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To fully leverage the power of Aspect Models during application development generating the Java classes
for Aspect Models is usually the first step. However, while it allows to easily and quickly build an
application that uses the data of single Aspects, it does not help to build applications that can handle
the data of Aspects in a generic way, that means: using the Meta Model.</p>
</div>
<div class="paragraph">
<p>What would be an example for such a case? Let&#8217;s assume a very simple application, that still shows
very well, why using the Meta Model is mandatory despite the problem at hand seeming not very complex at first.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s assume we&#8217;re starting our application with the well-known <a href="https://github.com/eclipse-esmf/esmf-aspect-model-editor/blob/main/core/apps/ame/src/assets/aspect-models/org.eclipse.examples/1.0.0/Movement.ttl">Movement</a>
Aspect, but possibly more Aspects are to come in the future.<br>
To easily get a quick overview of the Aspect data we want to write a console application that pulls the data
from the Aspect and prints it to console nicely formatted. Using a built-in mechanism like generated
<code>toString</code> methods might work for a very first version and for simple Aspect Models, but our Aspect already
contains nested entity structures and future ones could contain even more complex ones, with lists of entities
within lists. And apart from that, we want to print them <em>really</em> nicely, with indentation and other formatting
applied, maybe like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">[Movement]
- Is moving: YES
- Speed: 35 km/h
- Speed limit warning: yellow
- Position:
  - Latitude: 45.2
  - Longitude: 32.7
  - Altitude: 17.0
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, one possibility would of course be to write specific code that does exactly that for this Aspect.<br>
Code like that however has multiple drawbacks: it&#8217;s tedious to write (maybe not for one or two Aspects, but
most applications will work with way more Aspects), error-prone and - most importantly - it
requires touching every time your Aspect Model changes.</p>
</div>
<div class="paragraph">
<p>A second option that often comes to mind when working with models of any kind is code generation, just as we
use it for the Java POJOs through the respective tooling. While code generation is a great tool for situations
where the input might change quite often, but the <em>targeted use case</em> does not, it isn&#8217;t the best fit for
use cases, that most likely will evolve over time. Building applications with Aspect Models is most of the time
exactly that - how you use the Aspect Data is often subject to different changes. Adapting a generator or
template for that all the time in the end does not buy you much.</p>
</div>
<div class="paragraph">
<p>What we would need is a possibility to work on the Meta Model and Aspect Model at the same time, to be
able to explicitly work with or iterate over its properties. Taking the Aspect Model from above, we could e.g.
write code like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Movement movement = retrieveMovement();

for ( Property p : getAllProperties() ) {
   System.out.println( String.format( "- %s: %s", p.getName(), p.getValue( movement ) ) );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code may not look very special at first glance or you might ask the question where&#8217;s the big difference
compared to the other attempts we discussed above? Let&#8217;s take a deeper look.</p>
</div>
<div class="paragraph">
<p>Most obviously we are able to handle all properties of an Aspect with exactly one line - we print the property
name and the value. This is the first major advantage, because as long as we do not have the need to apply
very specific formatting to single elements, this single line will be a fit for any property of the Aspect -
also those, that we might add to (or also remove from) the Aspect Model in the future.</p>
</div>
<div class="paragraph">
<p>This directly brings us to a related advantage, that is hidden in the loop itself: the <code>getAllProperties()</code> method.
Where does this come from? We&#8217;ll see later on, that we use Static Meta Classes for that, but for now let&#8217;s
assume, that this part will be <em>generated</em>. Remember that we said, code generation is great for anything where
the use case does only rarely change? Getting a list of our Model&#8217;s properties is exactly such a use case.
We want a list and that&#8217;s that.</p>
</div>
<div class="paragraph">
<p>This means, whenever we change our Aspect Model, we run the code generation step once to get the updated
artifacts, and after that the code above will work still <em>exactly the same</em> - but it also will automatically
pick up the changes to the list of our properties.</p>
</div>
<div class="paragraph">
<p>Even this over-simplified example already shows the great benefits of this approach, as it allows developers
to write very stable <em>generic</em> code that can easily also perform much more complex tasks, as long as the input
that is required is made up of an Aspect Model and its data.</p>
</div>
<div class="paragraph">
<p>Granted, code like above could also be written using a dynamically loaded Aspect Model (note the missing <em>Static</em>).
So in order to close this motivation let&#8217;s assume another small requirement for our application that is at least
rather ugly to implement: our Aspects not only carry the data we need for our daily work, but also a lot of
data which is not strictly required to be printed - or maybe we just want to print it when some kind of verbose
mode is enabled.<br>
Something like this requires filtering the list of properties we use. Now how to do this? Of course, we apply
some filter predicate and skip let&#8217;s say the properties called <code>speed</code> and <code>speedLimitWarning</code>. As we have
to use string matching on human knowledge about the Aspect Model, we again can quickly identify two issues:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>string matching code is always ugly and subject to typing errors</p>
</li>
<li>
<p>if we ever remove e.g. the property <code>speedLimitWarning</code> this will not break our code, but leave us with something
that can be surprising to another developer taking over - code, that&#8217;s outdated and nobody noticed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>How would this requirement look like, if we now assume we already have such an accompanying static meta class being
called <code>MetaMovement</code> for our Aspect?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Movement movement = retrieveMovement();
List&lt;Property&gt; allProperties = getAllProperties();
if (mode != "VERBOSE") {
   allProperties.removeAll( List.of( MetaMovement.SPEED_LIMIT, MetaMovement.SPEED_LIMIT_WARNING ) );
}

for ( Property p : getAllProperties() ) {
   System.out.println( String.format( "- %s: %s", p.getName(), p.getValue( movement ) ) );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This solves both problems described above and adds convenience on top:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the static class is generated from the Aspect Model - no need to repeat the property names by hand</p>
</li>
<li>
<p>the static class contains actual Meta Model elements - even no need for strings at all!</p>
</li>
<li>
<p>the intent of the code is easier to grasp</p>
</li>
<li>
<p>if we ever remove the property <code>speedLimitWarning</code>, the above code will <em>not compile</em> until we remove the
now invalid property reference - we gained compile-time safety!</p>
</li>
</ul>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <div class="footer-container">
      <p>This page was built using the Antora default UI.</p>
      <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
  </div>
</footer>


<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/lunr.min.js"></script>
<script src="../../_/js/vendor/search-ui.js" id="search-script" data-site-root-path="../.." data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
  </body>
</html>
