<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Custom Column Renderer :: Eclipse Semantic Modeling Framework (ESMF)</title>
    <link rel="canonical" href="https://eclipse-esmf.github.io/js-sdk-guide/tooling-guide/table-custom-column.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://eclipse-esmf.github.io">
        <div class="logo-headline-wrapper">
          <span class="docu-title">
            Eclipse Semantic Modeling Framework (ESMF)
          </span>
        </div>
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item">
          <input id="search-input" type="text" placeholder="Search docs">
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="js-sdk-guide" data-version="2.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">JavaScript SDK</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../getting-started-guide.html">Getting Started Guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Tooling Guide</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="internationalization.html">Add i18n support to a project</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="table-generation.html">Generating a table component</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="table-custom-column.html">Generating a table with custom columns</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="types.html">Generating Interfaces</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">JavaScript SDK</span>
    <span class="version">2.0.0</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../ame-guide/introduction.html">Aspect Model Editor</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../ame-guide/introduction.html">master</a>
        </li>
        <li class="version">
          <a href="../../../ame-guide/4.4.0/introduction.html">4.4.0</a>
        </li>
        <li class="version">
          <a href="../../../ame-guide/4.3.0/introduction.html">4.3.0</a>
        </li>
        <li class="version">
          <a href="../../../ame-guide/4.2.1/introduction.html">4.2.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../esmf-documentation/index.html">ESMF Documentation</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../esmf-documentation/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../esmf-developer-guide/index.html">ESMF SDK Developer Guide</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../esmf-developer-guide/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../esmf-developer-guide/2.2.0/index.html">2.2.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../../index.html">JavaScript SDK</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../index.html">master</a>
        </li>
        <li class="version is-current">
          <a href="../index.html">2.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../js-sdk-aml-guide/index.html">JavaScript SDK Aspect Model loader</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../js-sdk-aml-guide/index.html">master</a>
        </li>
        <li class="version">
          <a href="../../../js-sdk-aml-guide/2.1.0/index.html">2.1.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../samm-specification/snapshot/index.html">Semantic Aspect Meta Model</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../samm-specification/snapshot/index.html">snapshot</a>
        </li>
        <li class="version">
          <a href="../../../samm-specification/2.0.0/index.html">2.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../esmf-documentation/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">JavaScript SDK</a></li>
    <li>Tooling Guide</li>
    <li><a href="table-custom-column.html">Generating a table with custom columns</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">2.0.0</button>
  <div class="version-menu">
    <a class="version" href="../../tooling-guide/table-custom-column.html">master</a>
    <a class="version is-current" href="table-custom-column.html">2.0.0</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/eclipse-esmf/esmf-sdk-js-schematics/blob/v2.0.0/documentation/js-sdk-guide/modules/tooling-guide/pages/table-custom-column.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Custom Column Renderer</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The table UI representation for an Aspect Model per default renders the values
as text. However, when creating the table using the schematic, you can let
the schematic create additional, customizable columns.</p>
</div>
<div class="paragraph">
<p>One way to render the content of the column is to use the Angular [ng-template
directive](<a href="https://blog.angular-university.io/angular-ng-template-ng-container-ngtemplateoutlet/" class="bare">https://blog.angular-university.io/angular-ng-template-ng-container-ngtemplateoutlet/</a>), another
way is to create a custom component to individually render the content of a column. The latter choice is
recommended especially if business logic is involved for rendering the content.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="example-showing-a-traffic-light-in-a-column"><a class="anchor" href="#example-showing-a-traffic-light-in-a-column"></a>Example showing a traffic light in a column</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following example show how to implement and offer a column with graphical content
using [Scalable Vector Graphics (SVG)](<a href="https://www.w3.org/Graphics/SVG/" class="bare">https://www.w3.org/Graphics/SVG/</a>).</p>
</div>
<div class="sect2">
<h3 id="alternative-a-render-column-content-using-ng-template"><a class="anchor" href="#alternative-a-render-column-content-using-ng-template"></a>Alternative A: Render column content using ng-template</h3>
<div class="paragraph">
<p>This is the recommended approach if no business logic is involved.</p>
</div>
<div class="sect3">
<h4 id="step-a1-create-graphical-representation"><a class="anchor" href="#step-a1-create-graphical-representation"></a>Step A1: Create graphical representation</h4>
<div class="paragraph">
<p>Let&#8217;s say that the table row includes an attribute <strong>speedLimitWarning</strong> that
can be one of <strong>red</strong>, <strong>yellow</strong> or <strong>green</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/svg-traffic-light.png" alt="SVG Traffic Light">
</div>
</div>
<div class="paragraph">
<p>Drawing a circle and filling it with one of these colors can be done in the
following way inside a <strong>ng-template</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;ng-template #speedLimitWarningTemplate let-speedLimitWarningColor="speedLimitWarning"&gt;
  &lt;svg width="40" height="40"&gt;
    &lt;circle cx="20" cy="20" r="18" stroke="black" stroke-width="3"
      [attr.fill]="speedLimitWarningColor"
    /&gt;
  &lt;/svg&gt;
&lt;/ng-template&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is a ng-template variable <strong>speedLimitWarningColor</strong> that is defined
using in combination with the prefix <strong>let-</strong>, and its value is set by the
variable <strong>speedLimitWarning</strong> within the context of the calling parent component (the table column).</p>
</div>
</div>
<div class="sect3">
<h4 id="step-a2-connect-the-parent-component-with-this-child-component"><a class="anchor" href="#step-a2-connect-the-parent-component-with-this-child-component"></a>Step A2: Connect the parent component with this child component</h4>
<div class="paragraph">
<p>At the table column, add a <strong>ng-container</strong> statement as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;!-- speedLimitWarning Column --&gt;
&lt;ng-container matColumnDef="speedLimitWarning"&gt;
  &lt;th mat-header-cell *matHeaderCellDef mat-sort-header&gt;{{ 'movement.v100.speedLimitWarning.preferredName' | translate }}&lt;/th&gt;

  &lt;td mat-cell *matCellDef="let row"&gt;
    &lt;!-- {{ row.speedLimitWarning || '-' }} --&gt;
    &lt;ng-container *ngTemplateOutlet="speedLimitWarningTemplate;context:row"&gt;&lt;/ng-container&gt;
  &lt;/td&gt;
&lt;/ng-container&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This embeds the <strong>ng-template</strong> with the id <strong>speedLimitWarningTemplate</strong> inside the column
and uses the current row as the context for the child component.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="alternative-b-render-column-content-using-a-component"><a class="anchor" href="#alternative-b-render-column-content-using-a-component"></a>Alternative B: Render column content using a component</h3>
<div class="paragraph">
<p>This is the recommended approach if business logic is involved
for rendering the component. In this example, depending on a
percentage between 0% and 100% of remaining battery power, the
color of the bar is changed.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/svg-bar-indicator.png" alt="SVG Bar Indicator">
</div>
</div>
<div class="sect3">
<h4 id="step-b1-create-a-new-ui-component"><a class="anchor" href="#step-b1-create-a-new-ui-component"></a>Step B1: Create a new UI component</h4>
<div class="paragraph">
<p>By creating a new UI component, we keep the rendering isolated from the generated table UI component.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>ng generate component svg-bar-indicator</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the new component got the selector <strong>app-svg-bar-indicator</strong>, so it can be used in any Angular template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;app-svg-bar-indicator&gt;&lt;/app-svg-bar-indicator&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, only the text <strong>svg-bar-indicator works!</strong> is printed out. Let&#8217;s replace that by a SVG image.</p>
</div>
</div>
<div class="sect3">
<h4 id="step-b2-create-a-static-svg-image"><a class="anchor" href="#step-b2-create-a-static-svg-image"></a>Step B2: Create a static SVG image</h4>
<div class="paragraph">
<p>Change file <strong>svg-bar-indicator.component.html</strong> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;svg width="100" height="20"&gt;
  &lt;rect x="0" y="0" width="80" height="20" fill="lightgreen" /&gt;
  &lt;text x="2" y="17" font-size="20px"&gt;80%&lt;/text&gt;
&lt;/svg&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This draws a fixed green bar with a width of 80 pixels and a text with "80%".</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step-b3-create-a-dynamic-svg-image"><a class="anchor" href="#step-b3-create-a-dynamic-svg-image"></a>Step B3: Create a dynamic SVG image</h3>
<div class="paragraph">
<p>Change file <strong>svg-bar-indicator.component.html</strong> as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;svg width="100" height="20"&gt;
  &lt;rect x="0" y="0" [attr.width]="indicatorValue" height="20" [attr.fill]="indicatorColor" /&gt;
  &lt;text x="2" y="17" font-size="18px"&gt;{{ indicatorValue }}%&lt;/text&gt;
&lt;/svg&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>This introduces the two component properties <strong>indicatorValue</strong> and <strong>indicatorValue</strong>.
<strong>indicatorValue</strong> specifies the length of the bar and the text label,
<strong>indicatorColor</strong> specifies the color of the bar.</p>
</div>
<div class="paragraph">
<p>Now, the necessary modifications in <strong>svg-bar-indicator.component.ts</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-typescript hljs" data-lang="typescript">import { Component, OnInit, Input, OnChanges, SimpleChanges } from '@angular/core';

@Component({
selector: 'app-svg-bar-indicator',
templateUrl: './svg-bar-indicator.component.html',
styleUrls: ['./svg-bar-indicator.component.css']
})
export class SvgBarIndicatorComponent implements OnInit, OnChanges {

  @Input() indicatorValue: number = 0;
  indicatorColor: string;

  constructor() {
    this.indicatorColor = 'lightgreen';
  }

  ngOnInit(): void {
  }

  ngOnChanges(changes: SimpleChanges): void {
    if (changes.indicatorValue.currentValue &gt;= 20) {
      this.indicatorColor = 'lightgreen';
    } else if (changes.indicatorValue.currentValue &gt;= 10) {
      this.indicatorColor = 'yellow';
    } else {
      this.indicatorColor = 'red';
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <strong>@Input()</strong> decorator allows that this property can receive its value
from the parent component.</p>
</div>
<div class="paragraph">
<p>On changes of the property <strong>indicatorValue</strong>, there is a small section of business
logic that defines the fill color of the bar, depending on the value of
<strong>indicatorValue</strong>.</p>
</div>
<div class="sect3">
<h4 id="step-b4-connect-the-parent-component-with-this-child-component"><a class="anchor" href="#step-b4-connect-the-parent-component-with-this-child-component"></a>Step B4: Connect the parent component with this child component</h4>
<div class="paragraph">
<p>You can <strong>directly</strong> integrate this component in the respective column of the table as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-html hljs" data-lang="html">&lt;!-- batteryLevel Column --&gt;
&lt;ng-container matColumnDef="batteryLevel"&gt;
  &lt;th mat-header-cell *matHeaderCellDef mat-sort-header&gt;{{ 'movement.v100.batteryLevel.preferredName' | translate }}&lt;/th&gt;

  &lt;td mat-cell *matCellDef="let row"&gt;
    &lt;app-svg-bar-indicator [indicatorValue]="row.batteryLevel"&gt;&lt;/app-svg-bar-indicator&gt;
  &lt;/td&gt;
&lt;/ng-container&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../_/js/site.js"></script>
<script src="../../../_/js/vendor/lunr.min.js"></script>
<script src="../../../_/js/vendor/search.js" id="search-script" data-base-path="../../.." data-page-path="/js-sdk-guide/2.0.0/tooling-guide/table-custom-column.html"></script>
<script async src="../../../_/../search-index.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
